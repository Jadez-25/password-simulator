<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Password Security Simulation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>

    <!-- Audio elements -->
    <audio id="sfx-ambient" src="assets/media/glitch_ambience.mp3" loop></audio>
    <audio id="sfx-typing" src="assets/media/typing.mp3" loop></audio>
    <audio id="sfx-heartbeat" src="assets/media/heartbeat.mp3"></audio>
    <audio id="sfx-flatline" src="assets/media/flatline.mp3"></audio>

    <!-- SCREEN 1: Login -->
    <div id="screen-intro" class="screen active">
        <div class="outlook-shell">
            <div class="outlook-left">
                <div class="owaLogoContainer">
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAABsCAYAAACiuLoyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkMwQzQ2MDA4RjEzRTExRTFCMzNFQTMwMzE5REU3RjExIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkMwQzQ2MDA5RjEzRTExRTFCMzNFQTMwMzE5REU3RjExIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzBDNDYwMDZGMTNFMTFFMUIzM0VBMzAzMTlERTdGMTEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzBDNDYwMDdGMTNFMTFFMUIzM0VBMzAzMTlERTdGMTEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5qf500AAAGPUlEQVR42uxdOXLjRhRtqJSbPsFg5gIiaw4gsmociwocm0zslIwcijyBNOE4EfMJpInHVaQO4BJvIN5A9Ang/uKHq93Gjm4AjX6vqmug4YLlP7y/NZqB8AhRFA3kP0MeF3KEcozl2AVBMOnB+ZX+zHmPjT1mA9O4ZKMPBNAvAkhDhwl39RCm7RkBMuQb6BsBIN+eEADy7QkBIN8eEQDy7QkBIN+eEADy7REBIN8eEkAa/QHy7bcCTHEZ/MUZLgEIAIAAAAgAgAAACACAAAAIAIAAAAgAeIBzXIL/I4qiW+FGb+Qox5McmyAIjiCAOZDxx44cK/VyfpGknTAh4AI8JewtYgC/MQMB/MYaMYCfIL8/l0HgY5VnA6EAbmMvx4SMjzqAf3hk4+/rfAkI4CaW0vDXau4v5X8IAvjh7+muv1P/UxqfMoAtgsD++3u66w+a8Sn/X1T9UhDADWxY9lXJH/BdX6tk3SQBjhy4UO2aWLyPT0h5IOVKYJq6DkrxNtpdP2Tj139oJ7KPV/JRzNgixzMgWYuaxVY7hm3UPl6TAju+lmkQZcdZA9L1nhhctFtF75NjKTdHrBQ+YsfXba/dGPdy897kjs4sS9e8apuST37EwY9PuKMVyzR/H7Lkz0zv7Myi8Td1v4QvwsQTJYhLuktN8ik+ehaW5ifYIMDGhPE1Elz33PgHzu/1YG9hLNhriAB0IkvTB8nuYN1T41NmNErw9/TU9q3tnZsmQKbPJ19GgYwcL0qku+VKVh4JVj10BeuUku62sXTYViqVsJ9Vzucf8lLFnBTIpTSQiD9NOL8pv1YVraaBnzMMR77sJufz0wIpzqOoMO+tY0hs4XJJ90E0vCKLKQIc0nrSLGlFfdk0yx2wVD46bPyN0Fq47O9JgRZtHJApAmQZpWwgk6cU3xw1/lKvi/DNQSneuK2DMkWAp7Sgr8LJhZz7ZlXJXMvvs1q4YZsHZ4oAuwy/XgVXOW7AdjawNhRrkNRTSXenGT8u6ba+ApsJAhwyUr+rit+ZV/WySgA22HtRrwxNBbGR3sKVgyR/JjoCIwSoYcg05LmNJ9sXhptS1Iu4q1gPmScEwy+iY4+cmSBA1l3i/CKTXJu/LugS6GYYpZR0n7t4PUwQ4O+M9K9Ogaq1yFjfN6e4kxyy70RySfdeNFDSbTsI7Nvdf6NXJtmwE87ldTTawnWFAK6DMphnVck4LiDfPldSvKQW7lRYbOGCAM3h7S7Wq5Ps40ciuYW7Ei2UdKvC5qTQujN5ulLzJ0NSB5NWT/93Zq7+RA67i3vh2KRWawpQdSqY5nPT8EML12rGahCmBLxb4eCMZhMEuLSgAoec19vyrUOOC2ZaircVji63b4IAoQUC7GvssymXcGrAn1I8ZzMeIwTImMhRtWL3lJGjhy0ToFcwFQOMU/z4pmIwtym7L6BdAmQ1fT6XNX5OAHkJs3WPANOMaH5VIhYgwy8z5H8g8OxgJwkwyJnZOylAgnjixDGHaPgVs47WAW5yagKTDN++E1ojpew+gGowWQmkbGChT33SSDCX71lqOfNBX/QgRf5XiP7NI4iqrC2WLeOjIgYtA2XypC3sqJun7G/raLYRtOkCBPvnh6JrARQ0flxjBzoeA8R4q4ubIIGpZVCAZglghATKhAoY30ECxCR4KfLgZ4LxZ8KRCRUgQH5MED8NvEhqpap3PL/nRXRkzjzSQIMpojh1zWjxJ8oU9gmvI8XrMQF0VRjj0vvhAgAQAAABABAAAAGAZvCJsmptfJHjO48Yv9NrIED/8Kc4NYV+UrZ/U8jxI2//CgXwD3+x4T/yNgjQIxwKvOcrq8DPrA4gQI+wLqgAH1kFiAz4xZAe4G0iLU3BLzi35w85PsjxSn+YnhHkKvQZQdSFdKEZddQWpCj9BVCABNT9LT7UAQAQAAABABAAAAEAEAAAAQAQAAABABAA6BbOAwmufYfi9CTOpcA8fW+Q+Tix8rPuYc+J8Z9mkKsw3gzSf+qEdzJgpaDxTtnGo1x9U4CS7FOJccFKMYYCdFsBggYOKlTI8K6jxIALsCYxp+ViaOy0g1UDzwtlG3DRBRhkcRsZCVyAAydnMyOBC+i8VCEj8cMFWMhIYmKMoQCeEKBCRuItAf4RYAD9ncEKHhJwfgAAAABJRU5ErkJggg=="
                        class="owaLogo" aria-hidden="true" />
                </div>
            </div>

            <div class="outlook-right">
                <div class="outlook-form-wrapper">
                    <div class="outlook-form-logo-line">
                        <div class="signInImageHeader" role="heading" aria-label="Outlook">
                            <img class="mouseHeader"
                                src="data:image/png;base64,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"
                                alt="Outlook" />
                        </div>
                    </div>

                    <label class="field-label" for="username">Domain\user name:</label>
                    <input id="username" class="input-field" type="text" />

                    <label class="field-label" for="password">Password:</label>
                    <input id="password" class="input-field" type="password" />

                    <div class="sign-in-row">
                        <button id="signInBtn" class="sign-in-btn">
                            <img class="imgLnk"
                                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjU1NzZGNEQzOTYxOTExRTE4ODU2ODkyQUQxMTQ2QUJGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjU1NzZGNEQ0OTYxOTExRTE4ODU2ODkyQUQxMTQ2QUJGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTU3NkY0RDE5NjE5MTFFMTg4NTY4OTJBRDExNDZBQkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTU3NkY0RDI5NjE5MTFFMTg4NTY4OTJBRDExNDZBQkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MvF4iAAACF0lEQVR42qyVz0sCQRTHZ5cSuqQJURRUt66GEuQlugmF0Ukw+huCjaBT0SkhEvwL6iQEERRJndIuCoLU1VsFQkH04xR0se/D79C4qLtCDz47zO6b7755M2/GUk5ZdbEwSIEEmAQRvn8ADXADTptHC++dBlsdhIfAJtgBQdXbvkAG5PCDb/OD7XIcByVwQNFLsA5iYJDE+O6SPuJbsrYq490ilulKZwrUwB4oeES8DPZBFDyDOCJvmBEHwDlFC8yrl6hy+crYc0QeMIUdMM9IN8Cb8mmI8I1jatRwtLDkaZt+Mv0P1adB/INjxbYRddBmnsKczt/0s/F2lJrhT5vgHoTkvWVZWlyPF620zb2qPHOajT/iuQQ+uaeLWPiQyyvPNiHCs+zces45G5fimGORaPGI4XHHNjrAvSv22ibilJs+0tsSV2qEfb3oo7b6Xwuw/ZGIX7gzxpi/v+LRi9g+E4nymNFKStaMrxNsGxJxnZ1Fz3haokVDdImLqi3Kti7CZ+wkXQvVHq1TnqFoyBD9dP06zfZGzgpJwxPTseKzlM3iaOVtqyL1cMUTb9o2jj6xXWOFfRtERzhWLIOffeldkTVq/QQM9yE6zDH6rMmZh9APWOXNkGSxJHzoJuib5NhVfeCb+1g+yGpVubrX4IIlH3EVRYrfrulbNc/iXleTwxPPz9V0KKl0X02Wx2Wa9rhM890u018BBgDOvaD/8G2ecwAAAABJRU5ErkJggg=="
                                alt="">
                            <span>sign in</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SCREEN 2: Dark Web Terminal -->
    <div id="screen-hacker" class="screen">
        <div class="darkweb-shell">
            <div class="darkweb-noise"></div>

            <div class="darkweb-layout" id="darkwebLayout">
                <div class="hacker-base" id="hackerBase">
                    <img src="assets/imgs/hacker.jpg" alt="hacker silhouette" class="hacker-image">
                </div>

                <!-- Terminal window -->
                <div class="terminal-window" id="terminalWindow">
                    <div class="terminal-header">
                        <div class="traffic-lights">
                            <span class="traffic-dot red"></span>
                            <span class="traffic-dot amber"></span>
                            <span class="traffic-dot green"></span>
                        </div>
                        <div class="terminal-header-right">
                            <div class="terminal-title">
                                darknet node ¬∑ credential attack console
                            </div>
                            <button id="muteToggle" class="mute-toggle">
                                <span class="icon" id="muteIcon">üîä</span>
                                <span id="muteLabel">Sound on</span>
                            </button>
                        </div>
                    </div>

                    <div class="terminal-body">
                        <h2>
                            Inbound Target: <span id="targetUser" style="color:#38bdf8;"></span>
                        </h2>

                        <div class="terminal-line terminal-muted">
                            [INFO] Listening on dark-web feeds for exposed logins‚Ä¶
                        </div>
                        <div class="terminal-line terminal-muted">
                            [INFO] Sample password captured from training portal. Starting offline crack.
                        </div>

                        <div id="statsLine" class="terminal-line terminal-green">
                            [INIT] GPU rig online ‚Äì preparing attack‚Ä¶
                        </div>

                        <div id="crackDisplay" class="terminal-line"></div>

                        <div id="guessLine" class="terminal-line"></div>
                        <div id="etaLine" class="terminal-line"></div>

                        <div class="progress-track">
                            <div id="progressFill" class="progress-fill"></div>
                        </div>

                        <div id="finalResult" class="terminal-line"></div>

                        <div id="analysisBox" class="analysis-box"></div>
                    </div>

                    <div class="terminal-footer">
                        <span>Training Simulation Mode ‚Äî Please DO NOT use real credentials.</span>
                        <button id="backBtn" class="btn-back">
                            <span>‚Ü© Restart Training</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Result modal -->
    <div id="resultModal" class="result-modal">
        <div class="result-modal-card">
            <h3 id="modalTitle" class="result-modal-title"></h3>
            <p id="modalMessage" class="result-modal-message"></p>

            <div class="result-modal-actions">
                <button id="modalRestartBtn" class="result-modal-btn secondary">
                    ‚Ü© Restart Training
                </button>
                <button id="modalOkBtn" class="result-modal-btn primary">
                    Close
                </button>
            </div>
        </div>
    </div>

    <!-- GLOBAL TRAINING DISCLAIMER -->
    <div class="training-banner">
        <span class="banner-icon">‚ö†Ô∏è</span>
        <span>This is a Password Security Training Simulation.
            <strong>Do NOT</strong> enter any real passwords or sensitive information.</span>
    </div>

    <script>
        // Screen elements
        const screenIntro = document.getElementById("screen-intro");
        const screenHacker = document.getElementById("screen-hacker");
        const signInBtn = document.getElementById("signInBtn");
        const backBtn = document.getElementById("backBtn");
        const passwordInput = document.getElementById("password");
        const usernameInput = document.getElementById("username");
        const targetUser = document.getElementById("targetUser");

        // Layout elements
        const darkwebLayout = document.getElementById("darkwebLayout");
        const terminalWindow = document.getElementById("terminalWindow");
        const hackerBase = document.getElementById("hackerBase");

        // Terminal elements
        const statsLine = document.getElementById("statsLine");
        const crackDisplay = document.getElementById("crackDisplay");
        const guessLine = document.getElementById("guessLine");
        const etaLine = document.getElementById("etaLine");
        const progressFill = document.getElementById("progressFill");
        const finalResult = document.getElementById("finalResult");
        const analysisBox = document.getElementById("analysisBox");

        // Sound elements
        const sfxAmbient = document.getElementById("sfx-ambient");
        const sfxTyping = document.getElementById("sfx-typing");
        const sfxHeartbeat = document.getElementById("sfx-heartbeat");
        const sfxFlatline = document.getElementById("sfx-flatline");
        const muteToggle = document.getElementById("muteToggle");
        const muteIcon = document.getElementById("muteIcon");
        const muteLabel = document.getElementById("muteLabel");
        let isMuted = false;

        // Result modal elements
        const resultModal = document.getElementById("resultModal");
        const modalTitle = document.getElementById("modalTitle");
        const modalMessage = document.getElementById("modalMessage");
        const modalOkBtn = document.getElementById("modalOkBtn");
        const modalRestartBtn = document.getElementById("modalRestartBtn");

        // Volume controls
        sfxTyping.volume = 0.15;
        sfxHeartbeat.volume = 0.90;
        sfxAmbient.volume = 0.30;
        sfxFlatline.volume = 1.0;

        // Heartbeat controller
        let heartbeatInterval = null;
        let heartbeatSpeed = 900; // ms between beats (slow at start)

        let attackStopped = false;

        function showResultModal(type, title, message, options = {}) {
            const { allowRestart = true } = options;

            modalTitle.textContent = title;
            modalMessage.textContent = message;

            // Reset previous styles
            modalTitle.classList.remove("modal-win", "modal-lose", "modal-warn");
            resultModal.classList.remove("warn");

            // Apply new type
            if (type === "win") {
                modalTitle.classList.add("modal-win");
            } else if (type === "lose") {
                modalTitle.classList.add("modal-lose");
            } else if (type === "warn") {
                modalTitle.classList.add("modal-warn");
                resultModal.classList.add("warn");
            }

            // Restart button shown only when appropriate
            modalRestartBtn.style.display = allowRestart ? "inline-flex" : "none";

            resultModal.classList.add("show");
        }

        // Close
        modalOkBtn.addEventListener("click", () => {
            resultModal.classList.remove("show");
        });

        // Restart Training
        modalRestartBtn.addEventListener("click", () => {
            resultModal.classList.remove("show");
            resetTerminalUI();
            passwordInput.value = "";
            setActiveScreen("intro");
            passwordInput.focus();
        });

        function setActiveScreen(which) {
            if (which === "intro") {
                screenIntro.classList.add("active");
                screenHacker.classList.remove("active");
            } else {
                screenIntro.classList.remove("active");
                screenHacker.classList.add("active");
            }
        }

        function safePlay(audio) {
            if (!audio || isMuted) return;
            audio.currentTime = 0;
            const p = audio.play();
            if (p && typeof p.catch === "function") {
                p.catch(() => { });
            }
        }

        function stopSound(audio, reset = true) {
            if (!audio) return;
            audio.pause();
            if (reset) audio.currentTime = 0;
        }

        function stopAllSounds() {
            stopSound(sfxAmbient);
            stopSound(sfxTyping);
            stopSound(sfxHeartbeat);
            stopSound(sfxFlatline);
        }

        function resetTerminalUI() {
            attackStopped = true;
            if (heartbeatInterval) {
                clearInterval(heartbeatInterval);
                heartbeatInterval = null;
            }
            progressFill.style.width = "0%";
            crackDisplay.textContent = "";
            guessLine.textContent = "";
            etaLine.textContent = "";
            finalResult.textContent = "";
            finalResult.className = "";
            analysisBox.textContent = "";
            statsLine.textContent = "[INIT] GPU rig online ‚Äì preparing attack‚Ä¶";
            statsLine.classList.remove("result-win", "result-lose");
            hackerBase.classList.remove("heartbeat");
            terminalWindow.classList.remove("shake");
            darkwebLayout.classList.remove("cinematic-in");
            stopAllSounds();
        }

        function analysePassword(password) {
            const length = password.length;
            const hasLower = /[a-z]/.test(password);
            const hasUpper = /[A-Z]/.test(password);
            const hasNumber = /[0-9]/.test(password);
            const hasSymbol = /[^A-Za-z0-9]/.test(password);
            const lower = password.toLowerCase();
            const commonPatterns = ["password", "1234", "qwerty", "monday", "admin", "legal", "november", "laaa"];
            const looksCommon = commonPatterns.some(p => lower.includes(p));

            let charsetSize = 0;
            if (hasLower) charsetSize += 26;
            if (hasUpper) charsetSize += 26;
            if (hasNumber) charsetSize += 10;
            if (hasSymbol) charsetSize += 32;

            let entropyBits = 0;
            if (charsetSize > 0) {
                entropyBits = length * Math.log2(charsetSize);
            }

            // Base rating from entropy
            let level = "";
            if (entropyBits < 28) {
                level = "Very weak";
            } else if (entropyBits < 36) {
                level = "Weak";
            } else if (entropyBits < 60) {
                level = "Okay";
            } else {
                level = "Strong";
            }

            // Common patterns are always very weak
            if (looksCommon) level = "Very weak";

            // Treat long & complex as Strong from 14+ chars
            if (
                length >= 14 &&
                hasLower &&
                hasUpper &&
                hasNumber &&
                hasSymbol &&
                !looksCommon
            ) {
                level = "Strong";
            }

            return {
                level,
                length,
                hasLower,
                hasUpper,
                hasNumber,
                hasSymbol,
                looksCommon,
                entropyBits: Math.round(entropyBits)
            };
        }

        function showAnalysis(info, crackedQuickly) {
            const issues = [];

            if (info.length < 12) {
                issues.push("Very short ‚Äì aim for at least 16 characters.");
            }
            if (!info.hasUpper || !info.hasLower) {
                issues.push("Use a mix of UPPER and lower case letters.");
            }
            if (!info.hasNumber) {
                issues.push("Add numbers that are not obvious (not just 1234).");
            }
            if (!info.hasSymbol) {
                issues.push("Add symbols like !, #, %, & (not in a simple pattern).");
            }
            if (info.looksCommon) {
                issues.push("Avoid common words like ‚Äúpassword‚Äù, ‚Äú1234‚Äù, days of the week, personal information, or system names.");
            }

            let html = `<strong>Analysis:</strong> Overall rating <strong>${info.level}</strong> (approx. entropy ${info.entropyBits} bits).`;
            html += `<br/>This simulation imagines a dark-web attacker using powerful GPUs.`;

            html += `<ul>`;
            if (issues.length === 0) {
                html += `<li>Good length and character mix ‚Äì this style is much harder for attackers to crack.</li>`;
            } else {
                issues.forEach(i => html += `<li>${i}</li>`);
            }
            if (crackedQuickly) {
                html += `<li>Because it was cracked in a short simulated time, this style of password would put your data at risk.</li>`;
            } else {
                html += `<li>The attacker gave up in this simulation ‚Äì this is closer to the strength you want for your password.</li>`;
            }
            html += `</ul>`;

            analysisBox.innerHTML = html;
        }

        // Heartbeat control (dynamic speed)
        function heartbeatBeat() {
            if (isMuted || attackStopped) return;
            sfxHeartbeat.currentTime = 0;
            const p = sfxHeartbeat.play();
            if (p && typeof p.catch === "function") {
                p.catch(() => { });
            }
            // small visual pulse on the hacker
            hackerBase.classList.add("heartbeat-flash");
            setTimeout(() => hackerBase.classList.remove("heartbeat-flash"), 120);
        }

        function startDynamicHeartbeat() {
            if (heartbeatInterval) {
                clearInterval(heartbeatInterval);
            }
            heartbeatSpeed = 900; // slow at start
            heartbeatBeat();
            heartbeatInterval = setInterval(heartbeatBeat, heartbeatSpeed);
        }

        function updateHeartbeatSpeed(progress) {
            if (!heartbeatInterval || attackStopped) return;

            let newSpeed;
            if (progress < 25) {
                newSpeed = 900;    // very calm
            } else if (progress < 50) {
                newSpeed = 650;    // a bit faster
            } else if (progress < 75) {
                newSpeed = 450;    // getting tense
            } else {
                newSpeed = 260;    // panic zone near the end
            }

            if (newSpeed === heartbeatSpeed) return;

            heartbeatSpeed = newSpeed;
            clearInterval(heartbeatInterval);
            heartbeatInterval = setInterval(heartbeatBeat, heartbeatSpeed);
        }

        function playFlatlineTwice(callback) {
            if (isMuted) {
                callback();
                return;
            }

            sfxFlatline.currentTime = 0;
            sfxFlatline.play();

            // When first play ends, restart from beginning
            sfxFlatline.onended = () => {
                sfxFlatline.currentTime = 0;
                sfxFlatline.play();

                // After second run finishes ‚Üí trigger callback
                sfxFlatline.onended = () => {
                    callback();
                };
            };
        }

        function runDarkWebCrackSimulation(password) {
            resetTerminalUI();
            attackStopped = false;

            const chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_-+=[]{};:,.?/|";
            const startTime = performance.now();
            let revealed = "";
            let index = 0;
            let totalGuesses = 0;

            const fakeGpuSpeed = (Math.random() * 280 + 120).toFixed(2); // GH/s
            statsLine.textContent = `[RIG] 4x GPU farm online ‚Äì ~${fakeGpuSpeed} GH/s estimated brute-force speed.`;

            // Analyse THIS password
            const info = analysePassword(password);

            // Visual speed still depends on strength (just for effect)
            const attemptDelay = info.level === "Strong" ? 18 :
                info.level === "Okay" ? 14 :
                    info.level === "Weak" ? 10 : 7;
            const charPause = 130;

            // Decide scenario purely from strength
            // "quickCrack"  = very weak / weak
            // "eventualCrack" = okay
            // "giveUp" = strong
            let outcome;
            if (info.level === "Very weak" || info.level === "Weak") {
                outcome = "quickCrack";
            } else if (info.level === "Okay") {
                outcome = "eventualCrack";
            } else {
                outcome = "giveUp"; // strong
            }

            // Start cinematic effects
            hackerBase.classList.add("heartbeat");
            darkwebLayout.classList.add("cinematic-in");
            safePlay(sfxAmbient);
            safePlay(sfxTyping);
            startDynamicHeartbeat();

            function finish() {
                attackStopped = true;
                if (heartbeatInterval) {
                    clearInterval(heartbeatInterval);
                    heartbeatInterval = null;
                }
                stopSound(sfxTyping, false);
                stopSound(sfxHeartbeat);
                stopSound(sfxAmbient);

                const fullyCracked = (outcome === "quickCrack" || outcome === "eventualCrack");
                const crackedQuickly = (outcome === "quickCrack");

                if (fullyCracked) {
                    progressFill.style.width = "100%";
                }

                if (outcome === "quickCrack") {
                    finalResult.textContent = "[ALERT] Password cracked very quickly. This style would be easy for attackers.";
                    finalResult.className = "result-lose";

                    playFlatlineTwice(() => {
                        showResultModal(
                            "lose",
                            "YOU LOST",
                            "In this simulation, this type of password was cracked quickly. It is too weak."
                        );
                    });

                } else if (outcome === "eventualCrack") {
                    finalResult.textContent = "[ALERT] Password eventually cracked. Longer and more random would be safer.";
                    finalResult.className = "result-lose";

                    playFlatlineTwice(() => {
                        showResultModal(
                            "lose",
                            "YOU LOST",
                            "The attacker eventually cracked this password. It still needs more length and randomness."
                        );
                    });

                } else {
                    finalResult.textContent = "[INFO] Attack abandoned ‚Äì password taking too long. Attacker moves on to easier targets.";
                    finalResult.className = "result-win";

                    showResultModal(
                        "win",
                        "YOU WON",
                        "In this simulation, the attacker gave up on this password. This is closer to the strength you should aim for."
                    );
                }

                hackerBase.classList.remove("heartbeat");
                showAnalysis(info, crackedQuickly && fullyCracked);
            }

            function updateProgress() {
                // Progress is based on how many characters are revealed
                const progress = password.length === 0 ? 0 : Math.min((index / password.length) * 100, 100);

                progressFill.style.width = progress + "%";
                updateHeartbeatSpeed(progress);

                const elapsed = (performance.now() - startTime) / 1000;
                const guessesPerSecond = elapsed > 0 ? (totalGuesses / elapsed) : 0;
                const ghps = (guessesPerSecond / 1e9).toFixed(2);

                guessLine.textContent = `[BRUTE] Guesses tried: ${totalGuesses.toLocaleString()}  (~${ghps} GH/s in sim)`;

                const remainingChars = password.length - index;
                const estPerChar = (chars.length * attemptDelay) / 2 / 1000;
                const etaSeconds = Math.max(0, remainingChars * estPerChar);
                etaLine.textContent = `[ETA] Estimated remaining time: ~${etaSeconds.toFixed(1)}s`;
            }

            function triggerShake() {
                terminalWindow.classList.add("shake");
                setTimeout(() => terminalWindow.classList.remove("shake"), 250);
            }

            function crackNextChar() {
                if (attackStopped) return;

                // If strong, attacker "gives up" around halfway through
                if (outcome === "giveUp" && index >= Math.ceil(password.length / 2)) {
                    finish();
                    return;
                }

                // For weak/okay, we crack the entire password
                if (index >= password.length) {
                    finish();
                    return;
                }

                const targetChar = password[index];
                let guessIndex = 0;

                function tryGuess() {
                    if (attackStopped) return;

                    const guessChar = chars[guessIndex];
                    totalGuesses++;

                    const partialDisplay = revealed + guessChar + "_".repeat(password.length - index - 1);
                    crackDisplay.textContent = `crack> ${partialDisplay}`;

                    updateProgress();

                    if (guessChar === targetChar) {
                        revealed += targetChar;
                        index++;
                        triggerShake();
                        setTimeout(crackNextChar, charPause);
                    } else {
                        guessIndex = (guessIndex + 1) % chars.length;
                        setTimeout(tryGuess, attemptDelay);
                    }
                }

                tryGuess();
            }

            crackNextChar();
        }

        function handleSignIn() {
            const username = usernameInput.value.trim();
            const password = passwordInput.value;

            if (!password || !password.trim()) {
                showResultModal(
                    "warn",
                    "Password Required",
                    "Please enter a password example first (not your real work password).",
                    { allowRestart: false }
                );
                return;
            }

            targetUser.textContent = username || "(unknown user)";

            setActiveScreen("hacker");

            // small delay for effect, then start attack
            setTimeout(() => {
                runDarkWebCrackSimulation(password);
            }, 600);
        }

        // Click on the button
        signInBtn.addEventListener("click", handleSignIn);

        // Press Enter in password or username field
        [usernameInput, passwordInput].forEach(input => {
            input.addEventListener("keydown", (e) => {
                if (e.key === "Enter") {
                    e.preventDefault();
                    handleSignIn();
                }
            });
        });

        backBtn.addEventListener("click", () => {
            resetTerminalUI();
            passwordInput.value = "";
            setActiveScreen("intro");
            passwordInput.focus();
        });

        muteToggle.addEventListener("click", () => {
            isMuted = !isMuted;

            if (isMuted) {
                // Turn sound OFF
                stopAllSounds();
                muteIcon.textContent = "üîá";
                muteLabel.textContent = "Sound off";
            } else {
                // Turn sound ON
                muteIcon.textContent = "üîä";
                muteLabel.textContent = "Sound on";

                // If we're on the hacker screen and the attack is still running, spin the ambience + typing back up.
                if (screenHacker.classList.contains("active") && !attackStopped) {
                    safePlay(sfxAmbient);
                    safePlay(sfxTyping);
                    // Heartbeat will resume automatically because the heartbeat loop checks isMuted each beat.
                }
            }
        });

    </script>

</body>

</html>